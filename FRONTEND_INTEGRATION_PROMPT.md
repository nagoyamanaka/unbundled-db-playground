# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµ±åˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€å°†æ¥ Unbundled DB Playground ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’è¿½åŠ ã™ã‚‹éš›ã«ã€AIã«æ¸¡ã™ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã™ã€‚

---

## ğŸ“‹ ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹æˆï¼ˆå®Œæˆæ¸ˆã¿ï¼‰

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:

- API: Express + TypeScript
- ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢: PostgreSQL / Elasticsearch / Redis / Kafka
- CDC: Debezium
- ãƒ†ã‚¹ãƒˆ: Vitestï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆ + çµ±åˆãƒ†ã‚¹ãƒˆï¼‰

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

```
GET    /health
POST   /posts
GET    /posts/:id
PUT    /posts/:id
DELETE /posts/:id
GET    /search?q=<query>
GET    /posts/by-author/:author
```

**ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ**:

```
unbundled-db-playground/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/server.ts           # Express API
â”‚   â”œâ”€â”€ consumers/
â”‚   â”‚   â”œâ”€â”€ search-indexer.ts
â”‚   â”‚   â””â”€â”€ cache-updater.ts
â”‚   â”œâ”€â”€ types/index.ts
â”‚   â””â”€â”€ test-helpers/
â”œâ”€â”€ __tests__/
â””â”€â”€ README.md
```

---

## ğŸ¯ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµ±åˆã®ç›®çš„

### å®Ÿç¾ã—ãŸã„ã“ã¨

1. **ãƒ–ãƒ­ã‚°æŠ•ç¨¿ã‚·ã‚¹ãƒ†ãƒ ã®UI**
   - æŠ•ç¨¿ä¸€è¦§è¡¨ç¤º
   - æŠ•ç¨¿ä½œæˆãƒ•ã‚©ãƒ¼ãƒ 
   - æŠ•ç¨¿è©³ç´°è¡¨ç¤º
   - æŠ•ç¨¿ç·¨é›†ãƒ»å‰Šé™¤

2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã®å¯è¦–åŒ–**
   - æŠ•ç¨¿ä½œæˆå¾Œã€Elasticsearch/Redisã¸ã®ä¼æ’­ã‚’è¦–è¦šåŒ–
   - ã€Œçµæœæ•´åˆæ€§ã€ã‚’ä½“é¨“ã§ãã‚‹UI

3. **æ¤œç´¢æ©Ÿèƒ½**
   - å…¨æ–‡æ¤œç´¢ï¼ˆElasticsearchï¼‰
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ã®è¡¨ç¤ºï¼ˆRedisï¼‰

4. **è»¢è·ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã¨ã—ã¦ã®è¦‹æ „ãˆ**
   - ãƒ¢ãƒ€ãƒ³ãªUI/UX
   - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
   - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ

---

## ğŸ—ï¸ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆæ¨å¥¨ï¼‰

### å¿…é ˆ

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14+ (App Router)
- **è¨€èª**: TypeScript
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS
- **çŠ¶æ…‹ç®¡ç†**: React Hooksï¼ˆuseState, useEffectï¼‰

### æ¨å¥¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- **UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: shadcn/uiï¼ˆãƒ¢ãƒ€ãƒ³ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
- **ãƒ•ã‚©ãƒ¼ãƒ **: React Hook Formï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ**: SWR ã¾ãŸã¯ TanStack Queryï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ï¼‰
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: Framer Motionï¼ˆçµæœæ•´åˆæ€§ã®å¯è¦–åŒ–ï¼‰

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

- **Markdownè¡¨ç¤º**: react-markdownï¼ˆæŠ•ç¨¿ã®ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆï¼‰
- **æ§‹æ–‡ãƒã‚¤ãƒ©ã‚¤ãƒˆ**: Prism.jsï¼ˆã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆè¡¨ç¤ºï¼‰

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆï¼ˆè¿½åŠ éƒ¨åˆ†ï¼‰

```
unbundled-db-playground/
â”œâ”€â”€ frontend/                   # æ–°è¦è¿½åŠ 
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ next.config.js
â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx        # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â”œâ”€â”€ posts/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx    # æŠ•ç¨¿ä¸€è¦§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx  # æŠ•ç¨¿è©³ç´°
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ new/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx  # æŠ•ç¨¿ä½œæˆ
â”‚   â”‚   â”‚   â””â”€â”€ search/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx    # æ¤œç´¢ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ PostCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PostForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PropagationVisualizer.tsx  # é‡è¦ï¼
â”‚   â”‚   â”‚   â””â”€â”€ CacheIndicator.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ usePosts.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useSearch.ts
â”‚   â”‚   â”‚   â””â”€â”€ usePropagationStatus.ts    # é‡è¦ï¼
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts          # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ globals.css
â”‚   â””â”€â”€ public/
â””â”€â”€ (æ—¢å­˜ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«)
```

---

## ğŸ¨ ç”»é¢è¨­è¨ˆï¼ˆãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰

### 1. ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ`/`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Unbundled DB Playground            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  DDIAã®è§£ä½“DBã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Ÿè£…     â”‚
â”‚                                     â”‚
â”‚  [æŠ•ç¨¿ä¸€è¦§ã‚’è¦‹ã‚‹] [æ–°è¦æŠ•ç¨¿]       â”‚
â”‚                                     â”‚
â”‚  â—‰ PostgreSQL â†’ Kafka â†’ ES/Redis   â”‚
â”‚  â—‰ çµæœæ•´åˆæ€§ã‚’ä½“é¨“                â”‚
â”‚  â—‰ Polyglot Persistence             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æŠ•ç¨¿ä¸€è¦§ï¼ˆ`/posts`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æŠ•ç¨¿ä¸€è¦§                [æ–°è¦æŠ•ç¨¿] â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  [æ¤œç´¢ãƒãƒ¼: _______________] [ğŸ”]  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ PostCard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ã‚¿ã‚¤ãƒˆãƒ«                     â”‚   â”‚
â”‚  â”‚ è‘—è€…: Alice | 2æ™‚é–“å‰        â”‚   â”‚
â”‚  â”‚ æœ¬æ–‡ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼...          â”‚   â”‚
â”‚  â”‚ [è©³ç´°] [ç·¨é›†] [å‰Šé™¤]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ PostCard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ...                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æŠ•ç¨¿ä½œæˆï¼ˆ`/posts/new`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–°è¦æŠ•ç¨¿                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  ã‚¿ã‚¤ãƒˆãƒ«:                          â”‚
â”‚  [_____________________________]   â”‚
â”‚                                     â”‚
â”‚  è‘—è€…å:                            â”‚
â”‚  [_____________________________]   â”‚
â”‚                                     â”‚
â”‚  æœ¬æ–‡:                              â”‚
â”‚  [                               ] â”‚
â”‚  [                               ] â”‚
â”‚  [                               ] â”‚
â”‚                                     â”‚
â”‚  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [æŠ•ç¨¿ã™ã‚‹]          â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ ä¼æ’­çŠ¶æ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… PostgreSQL: ä¿å­˜å®Œäº†      â”‚   â”‚
â”‚  â”‚ â³ Kafka: é…ä¿¡ä¸­...          â”‚   â”‚
â”‚  â”‚ â³ Elasticsearch: å¾…æ©Ÿä¸­     â”‚   â”‚
â”‚  â”‚ â³ Redis: å¾…æ©Ÿä¸­             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. æŠ•ç¨¿è©³ç´°ï¼ˆ`/posts/[id]`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† æˆ»ã‚‹              [ç·¨é›†] [å‰Šé™¤]  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  ã‚¿ã‚¤ãƒˆãƒ«                            â”‚
â”‚  è‘—è€…: Alice | 2024-01-01 10:00    â”‚
â”‚                                     â”‚
â”‚  æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡            â”‚
â”‚  æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡            â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’¾ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ: Redis   â”‚   â”‚
â”‚  â”‚    ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 5ms           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. æ¤œç´¢ãƒšãƒ¼ã‚¸ï¼ˆ`/search`ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¤œç´¢                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  [æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰: _____________] [ğŸ”]  â”‚
â”‚                                     â”‚
â”‚  æ¤œç´¢çµæœ: 3ä»¶ï¼ˆElasticsearchä½¿ç”¨ï¼‰ â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ PostCard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ã‚¿ã‚¤ãƒˆãƒ« (ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º)   â”‚   â”‚
â”‚  â”‚ ...Kafka is a...            â”‚   â”‚
â”‚  â”‚ ã‚¹ã‚³ã‚¢: 8.5                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€ PostCard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ...                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ é‡è¦æ©Ÿèƒ½ï¼šçµæœæ•´åˆæ€§ã®å¯è¦–åŒ–

### PropagationVisualizer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ç›®çš„**: æŠ•ç¨¿ä½œæˆå¾Œã€å„ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã¸ã®ä¼æ’­ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤º

**å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸**:

```tsx
interface PropagationStatus {
  postgresql: "pending" | "success" | "error";
  kafka: "pending" | "success" | "error";
  elasticsearch: "pending" | "success" | "error";
  redis: "pending" | "success" | "error";
}

function PropagationVisualizer({ postId }: { postId: number }) {
  const [status, setStatus] = useState<PropagationStatus>({
    postgresql: "success", // å³åº§ã«å®Œäº†
    kafka: "pending",
    elasticsearch: "pending",
    redis: "pending",
  });

  useEffect(() => {
    // ãƒãƒ¼ãƒªãƒ³ã‚°: 500msã”ã¨ã«APIã‚’å©ã„ã¦çŠ¶æ…‹ç¢ºèª
    const interval = setInterval(async () => {
      // GET /api/propagation-status/:id
      const response = await fetch(`/api/propagation-status/${postId}`);
      const data = await response.json();
      setStatus(data.status);

      // ã™ã¹ã¦å®Œäº†ã—ãŸã‚‰ãƒãƒ¼ãƒªãƒ³ã‚°åœæ­¢
      if (allCompleted(data.status)) {
        clearInterval(interval);
      }
    }, 500);

    return () => clearInterval(interval);
  }, [postId]);

  return (
    <div className="space-y-2">
      <StatusRow label="PostgreSQL" status={status.postgresql} />
      <StatusRow label="Kafka" status={status.kafka} />
      <StatusRow label="Elasticsearch" status={status.elasticsearch} />
      <StatusRow label="Redis" status={status.redis} />
    </div>
  );
}
```

**APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«è¿½åŠ ï¼‰**:

```typescript
// GET /api/propagation-status/:id
app.get("/api/propagation-status/:id", async (req, res) => {
  const { id } = req.params;

  // Elasticsearchã‚’ç¢ºèª
  let esStatus = "pending";
  try {
    await es.get({ index: "posts", id });
    esStatus = "success";
  } catch (error) {
    esStatus = "pending";
  }

  // Redisã‚’ç¢ºèª
  const cached = await redis.get(`post:${id}`);
  const redisStatus = cached ? "success" : "pending";

  res.json({
    status: {
      postgresql: "success", // å¸¸ã«æˆåŠŸï¼ˆä½œæˆæ¸ˆã¿ã®ãŸã‚ï¼‰
      kafka: "success", // ç°¡ç•¥åŒ–ï¼ˆå®Ÿéš›ã¯Kafka UIã‹ã‚‰å–å¾—ï¼‰
      elasticsearch: esStatus,
      redis: redisStatus,
    },
  });
});
```

---

## ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```css
/* Primaryï¼ˆãƒ¡ã‚¤ãƒ³è‰²ï¼‰ */
--primary: #3b82f6; /* é’ - Kafkaã®ã‚¤ãƒ¡ãƒ¼ã‚¸ */
--primary-dark: #2563eb;

/* Secondary */
--secondary: #10b981; /* ç·‘ - æˆåŠŸçŠ¶æ…‹ */
--accent: #f59e0b; /* ã‚ªãƒ¬ãƒ³ã‚¸ - è­¦å‘Š */

/* Status Colors */
--success: #10b981;
--pending: #f59e0b;
--error: #ef4444;

/* Background */
--bg-primary: #ffffff;
--bg-secondary: #f9fafb;
--bg-dark: #1f2937;

/* Text */
--text-primary: #111827;
--text-secondary: #6b7280;
```

### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

**çµæœæ•´åˆæ€§ã®è¡¨ç¾**:

```tsx
// Framer Motion ã‚’ä½¿ç”¨
<motion.div
  initial={{ opacity: 0, scale: 0.8 }}
  animate={{ opacity: 1, scale: 1 }}
  transition={{ duration: 0.3 }}
>
  {/* ä¼æ’­å®Œäº†æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */}
</motion.div>
```

**ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**:

```tsx
<motion.div
  animate={{ rotate: 360 }}
  transition={{ duration: 1, repeat: Infinity, ease: "linear" }}
>
  â³
</motion.div>
```

---

## ğŸ”Œ APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…

### lib/api.ts

```typescript
const API_BASE = process.env.NEXT_PUBLIC_API_URL || "http://localhost:3000";

export interface Post {
  id: number;
  title: string;
  content: string;
  author: string;
  created_at: string;
  updated_at: string;
}

export const api = {
  // æŠ•ç¨¿ä¸€è¦§å–å¾—
  async getPosts(): Promise<Post[]> {
    const res = await fetch(`${API_BASE}/posts`);
    return res.json();
  },

  // æŠ•ç¨¿è©³ç´°å–å¾—
  async getPost(id: number): Promise<{ post: Post; source: string }> {
    const res = await fetch(`${API_BASE}/posts/${id}`);
    return res.json();
  },

  // æŠ•ç¨¿ä½œæˆ
  async createPost(data: {
    title: string;
    content: string;
    author: string;
  }): Promise<{ post: Post }> {
    const res = await fetch(`${API_BASE}/posts`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data),
    });
    return res.json();
  },

  // æŠ•ç¨¿æ›´æ–°
  async updatePost(
    id: number,
    data: { title?: string; content?: string },
  ): Promise<{ post: Post }> {
    const res = await fetch(`${API_BASE}/posts/${id}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data),
    });
    return res.json();
  },

  // æŠ•ç¨¿å‰Šé™¤
  async deletePost(id: number): Promise<void> {
    await fetch(`${API_BASE}/posts/${id}`, { method: "DELETE" });
  },

  // æ¤œç´¢
  async search(query: string): Promise<{ results: Post[]; total: any }> {
    const res = await fetch(
      `${API_BASE}/search?q=${encodeURIComponent(query)}`,
    );
    return res.json();
  },

  // ä¼æ’­çŠ¶æ³ç¢ºèª
  async getPropagationStatus(id: number): Promise<{
    status: {
      postgresql: string;
      kafka: string;
      elasticsearch: string;
      redis: string;
    };
  }> {
    const res = await fetch(`${API_BASE}/api/propagation-status/${id}`);
    return res.json();
  },
};
```

---

## ğŸ§ª ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### æ¨å¥¨ãƒ„ãƒ¼ãƒ«

- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: Vitest + React Testing Library
- **E2Eãƒ†ã‚¹ãƒˆ**: Playwright

### ãƒ†ã‚¹ãƒˆå¯¾è±¡

1. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ**
   - PostCard ã®è¡¨ç¤º
   - PostForm ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - PropagationVisualizer ã®çŠ¶æ…‹é·ç§»

2. **çµ±åˆãƒ†ã‚¹ãƒˆ**
   - æŠ•ç¨¿ä½œæˆ â†’ ä¼æ’­ç¢ºèª â†’ æ¤œç´¢ã§ãƒ’ãƒƒãƒˆ

3. **E2Eãƒ†ã‚¹ãƒˆ**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼å…¨ä½“ï¼ˆä½œæˆâ†’è¡¨ç¤ºâ†’ç·¨é›†â†’å‰Šé™¤ï¼‰

---

## ğŸ“‹ å®Ÿè£…ã®å„ªå…ˆé †ä½

### Phase 1: åŸºæœ¬æ©Ÿèƒ½ï¼ˆæœ€å„ªå…ˆï¼‰

- [ ] Next.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [ ] APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
- [ ] æŠ•ç¨¿ä¸€è¦§è¡¨ç¤º
- [ ] æŠ•ç¨¿è©³ç´°è¡¨ç¤º
- [ ] æŠ•ç¨¿ä½œæˆãƒ•ã‚©ãƒ¼ãƒ 

### Phase 2: ç‰¹å¾´çš„ãªæ©Ÿèƒ½

- [ ] PropagationVisualizer å®Ÿè£…ï¼ˆé‡è¦ï¼ï¼‰
- [ ] æ¤œç´¢æ©Ÿèƒ½
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆè¡¨ç¤º

### Phase 3: UXå‘ä¸Š

- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### Phase 4: æœ€é©åŒ–

- [ ] SWR/TanStack Query ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

---

## ğŸ¯ AIã¸ã®å…·ä½“çš„ãªæŒ‡ç¤ºï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹ï¼‰

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã‚¿ã‚¹ã‚¯

## èƒŒæ™¯
Unbundled DB Playgroundã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒå®Œæˆã—ã¦ã„ã¾ã™ã€‚
Express APIã€PostgreSQLã€Kafkaã€Elasticsearchã€RedisãŒç¨¼åƒä¸­ã§ã™ã€‚

## å®Ÿè£…ã—ãŸã„ã‚‚ã®
Next.js 14ï¼ˆApp Routerï¼‰ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

## è¦ä»¶
1. æŠ•ç¨¿ä¸€è¦§ãƒ»è©³ç´°ãƒ»ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
2. **çµæœæ•´åˆæ€§ã®å¯è¦–åŒ–**ï¼ˆPropagationVisualizerï¼‰
3. å…¨æ–‡æ¤œç´¢æ©Ÿèƒ½
4. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ã®è¡¨ç¤º

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- Next.js 14+ (App Router)
- TypeScript
- Tailwind CSS
- shadcn/ui
- Framer Motion

## é‡è¦ãªæ©Ÿèƒ½
ç‰¹ã«é‡è¦ãªã®ã¯ã€Œçµæœæ•´åˆæ€§ã®å¯è¦–åŒ–ã€ã§ã™ã€‚
æŠ•ç¨¿ä½œæˆå¾Œã€PostgreSQL â†’ Kafka â†’ Elasticsearch/Redis ã¸ã®
ä¼æ’­çŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚

## æ—¢å­˜ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
GET  /posts
POST /posts
GET  /posts/:id
PUT  /posts/:id
DELETE /posts/:id
GET  /search?q=<query>

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
frontend/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã®ä¸­ã«Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é…ç½®ã—ã¦ãã ã•ã„ã€‚

## Phase 1ã‹ã‚‰æ®µéšçš„ã«å®Ÿè£…
ã¾ãšã¯ Phase 1ï¼ˆåŸºæœ¬æ©Ÿèƒ½ï¼‰ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Next.js å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [shadcn/ui](https://ui.shadcn.com/)
- [Framer Motion](https://www.framer.com/motion/)
- [Tailwind CSS](https://tailwindcss.com/)

---

ã“ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’AIã«æ¸¡ã™ã“ã¨ã§ã€æ®µéšçš„ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚
