# Unbundled Database Playground

DDIAï¼ˆDesigning Data-Intensive Applicationsï¼‰ç¬¬12ç« ã§è§£èª¬ã•ã‚Œã¦ã„ã‚‹ã€Œè§£ä½“ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆUnbundled Databaseï¼‰ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å®Ÿè£…ä¾‹ã€‚

## ğŸ“– æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å®Ÿè·µçš„ã«å­¦ã¶ãŸã‚ã®ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã™ï¼š

- **Event-Driven Architecture** - ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **Change Data Capture (CDC)** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤‰æ›´ã®è‡ªå‹•æ¤œçŸ¥
- **Polyglot Persistence** - ç›®çš„ã«å¿œã˜ãŸè¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢æ´»ç”¨
- **CQRS** - æ›¸ãè¾¼ã¿ã¨èª­ã¿å–ã‚Šã®åˆ†é›¢
- **çµæœæ•´åˆæ€§** - Eventual Consistency

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Server â”‚ (Express + TypeScript)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Write
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      WAL        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’   â”‚ Debezium â”‚ (CDC)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚  Kafka  â”‚ (Event Log)
                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â†“                â†“                â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Redis  â”‚    â”‚  Elastic â”‚    â”‚   ...    â”‚
              â”‚  (Cache) â”‚    â”‚  search  â”‚    â”‚ (Future) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

1. **æ›¸ãè¾¼ã¿**: API â†’ PostgreSQL
2. **æ¤œçŸ¥**: Debezium ãŒ PostgreSQL ã® WAL (Write-Ahead Log) ã‚’ç›£è¦–
3. **é…ä¿¡**: Debezium ãŒ Kafka ã«å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œ
4. **æ¶ˆè²»**: è¤‡æ•°ã® Consumer ãŒ Kafka ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡
   - Search Indexer â†’ Elasticsearch ã«ç´¢å¼•ä½œæˆ
   - Cache Updater â†’ Redis ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜
5. **èª­ã¿å–ã‚Š**: API ãŒé©åˆ‡ãªãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‹ã‚‰å–å¾—
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ â†’ Redis
   - æ¤œç´¢ã‚¯ã‚¨ãƒª â†’ Elasticsearch
   - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ â†’ PostgreSQL

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ   | æŠ€è¡“                 | å½¹å‰²                   |
| ---------------- | -------------------- | ---------------------- |
| API Server       | Express + TypeScript | RESTful API            |
| Database (Write) | PostgreSQL 15        | æ›¸ãè¾¼ã¿ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| CDC              | Debezium 2.4         | Change Data Capture    |
| Event Streaming  | Apache Kafka 7.5     | ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°           |
| Full-Text Search | Elasticsearch 8.11   | å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³       |
| Cache            | Redis 7              | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ¬ã‚¤ãƒ¤ãƒ¼     |
| Container        | Docker Compose       | ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³   |

**Zookeeperã«ã¤ã„ã¦**:
Kafkaã¯å†…éƒ¨çš„ã«Zookeeperã‚’ä½¿ç”¨ã—ã¦
ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€ãƒˆãƒ”ãƒƒã‚¯è¨­å®šã€
ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒã‚°ãƒ«ãƒ¼ãƒ—ã®èª¿æ•´ã‚’è¡Œã„ã¾ã™ã€‚
ç›´æ¥æ“ä½œã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€
KafkaãŒå‹•ä½œã™ã‚‹ãŸã‚ã«å¿…é ˆã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Docker Desktop ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- Node.js 18+ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- ç©ºããƒ¡ãƒ¢ãƒª 4GBä»¥ä¸Šæ¨å¥¨

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone <your-repo-url>
cd unbundled-db-playground
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 3. Docker ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•

```bash
docker-compose up -d
```

ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã™ã‚‹ã¾ã§1ã€œ2åˆ†å¾…ã¡ã¾ã™ã€‚

### 4. ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ç¢ºèª

```bash
docker-compose ps
```

ä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒ `running` çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼š

- `unbundled-postgres`
- `unbundled-kafka`
- `unbundled-zookeeper`
- `unbundled-debezium`
- `unbundled-elasticsearch`
- `unbundled-redis`
- `unbundled-kafka-ui`

### 5. Elasticsearch ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
npm run setup:elasticsearch
```

ã“ã‚Œã«ã‚ˆã‚Š `posts` ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

### 6. Debezium ã‚³ãƒã‚¯ã‚¿ã®ç™»éŒ²

```bash
npm run setup:debezium
```

PostgreSQL â†’ Kafka ã® CDC ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

## ğŸ® ä½¿ã„æ–¹

### ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’3ã¤é–‹ã

#### ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1: API Server

```bash
npm run dev:api
```

API ãŒ `http://localhost:3000` ã§èµ·å‹•ã—ã¾ã™ã€‚

#### ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2: Search Indexer Consumer

```bash
npm run dev:search-indexer
```

Kafka â†’ Elasticsearch ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

#### ã‚¿ãƒ¼ãƒŸãƒŠãƒ«3: Cache Updater Consumer

```bash
npm run dev:cache-updater
```

Kafka â†’ Redis ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥

åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼š

```bash
npm run test:insert
```

5ä»¶ã®ã‚µãƒ³ãƒ—ãƒ«æŠ•ç¨¿ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®è¦³å¯Ÿ

#### 1. PostgreSQL ã«æ›¸ãè¾¼ã¿

```bash
curl -X POST http://localhost:3000/posts \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Test Post",
    "content": "This is a test",
    "author": "Taro"
  }'
```

#### 2. Kafka UI ã§ã‚¤ãƒ™ãƒ³ãƒˆç¢ºèª

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:8080` ã‚’é–‹ãã€`blogdb.public.posts` ãƒˆãƒ”ãƒƒã‚¯ã‚’ç¢ºèªã€‚

#### 3. æ¤œç´¢ãƒ†ã‚¹ãƒˆï¼ˆElasticsearchï¼‰

```bash
curl "http://localhost:3000/search?q=Test"
```

æ•°ç§’å¾…ã¤ã¨ã€å…ˆã»ã©ä½œæˆã—ãŸæŠ•ç¨¿ãŒæ¤œç´¢çµæœã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

#### 4. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ†ã‚¹ãƒˆï¼ˆRedisï¼‰

```bash
# 1å›ç›®: DB ã‹ã‚‰å–å¾—ï¼ˆé…ã„ï¼‰
curl http://localhost:3000/posts/1

# 2å›ç›®: Cache ã‹ã‚‰å–å¾—ï¼ˆé€Ÿã„ï¼‰
curl http://localhost:3000/posts/1
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® `source` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã€ã©ã“ã‹ã‚‰å–å¾—ã—ãŸã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚

### åŒ…æ‹¬çš„ãªæ¤œç´¢ãƒ†ã‚¹ãƒˆ

```bash
npm run test:search
```

## ğŸ“Š ç®¡ç†ç”»é¢

| ã‚µãƒ¼ãƒ“ã‚¹      | URL                   | ç”¨é€”                           |
| ------------- | --------------------- | ------------------------------ |
| API           | http://localhost:3000 | RESTful API                    |
| Kafka UI      | http://localhost:8080 | Kafka ãƒˆãƒ”ãƒƒã‚¯ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª |
| Debezium API  | http://localhost:8083 | CDC ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª             |
| Elasticsearch | http://localhost:9200 | ç›´æ¥ã‚¯ã‚¨ãƒªå®Ÿè¡Œ                 |

## ğŸ§ª API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```bash
GET /health
```

### æŠ•ç¨¿ã®ä½œæˆ

```bash
POST /posts
Content-Type: application/json

{
  "title": "ã‚¿ã‚¤ãƒˆãƒ«",
  "content": "æœ¬æ–‡",
  "author": "è‘—è€…å"
}
```

### æŠ•ç¨¿ã®å–å¾—ï¼ˆIDæŒ‡å®šï¼‰

```bash
GET /posts/:id
```

### æŠ•ç¨¿ã®æ›´æ–°

```bash
PUT /posts/:id
Content-Type: application/json

{
  "title": "æ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«",
  "content": "æ–°ã—ã„æœ¬æ–‡"
}
```

### æŠ•ç¨¿ã®å‰Šé™¤

```bash
DELETE /posts/:id
```

### å…¨æ–‡æ¤œç´¢

```bash
GET /search?q=<æ¤œç´¢ã‚¯ã‚¨ãƒª>
```

### è‘—è€…åˆ¥ä¸€è¦§

```bash
GET /posts/by-author/:author
```

## ğŸ” è¦³å¯Ÿãƒã‚¤ãƒ³ãƒˆ

### 1. éåŒæœŸæ€§ã®ä½“é¨“

PostgreSQL ã«æ›¸ãè¾¼ã‚“ã ç›´å¾Œã«æ¤œç´¢ã—ã¦ã‚‚ã€ã™ãã«ã¯ãƒ’ãƒƒãƒˆã—ã¾ã›ã‚“ã€‚
æ•°ç§’å¾Œï¼ˆKafka â†’ Consumer â†’ Elasticsearch ã®å‡¦ç†ãŒå®Œäº†å¾Œï¼‰ã«ãƒ’ãƒƒãƒˆã—ã¾ã™ã€‚

### 2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®åŠ¹æœ

åŒã˜æŠ•ç¨¿ã‚’2å›å–å¾—ã™ã‚‹ã¨ã€2å›ç›®ã¯åœ§å€’çš„ã«é€Ÿããªã‚Šã¾ã™ã€‚
Consumer ãŒè‡ªå‹•ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°ã—ã¦ã„ã‚‹ãŸã‚ã€æ‰‹å‹•ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–ãŒä¸è¦ã§ã™ã€‚

### 3. è¤‡æ•°ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã®å”èª¿

1ã¤ã®æ›¸ãè¾¼ã¿ãŒè¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã«è‡ªå‹•çš„ã«åæ˜ ã•ã‚Œã‚‹æ§˜å­ã‚’è¦³å¯Ÿã§ãã¾ã™ã€‚

## ğŸ“ å­¦ç¿’åŠ¹æœ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šã˜ã¦ã€ä»¥ä¸‹ã‚’ä½“é¨“ã§ãã¾ã™ï¼š

- âœ… Event Sourcing ã®åŸºç¤
- âœ… CDC (Change Data Capture) ã®ä»•çµ„ã¿
- âœ… Kafka ã‚’ä½¿ã£ãŸã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
- âœ… Polyglot Persistence ã®å®Ÿè£…
- âœ… çµæœæ•´åˆæ€§ (Eventual Consistency) ã®ç†è§£
- âœ… CQRS ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè·µ

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Debezium ãŒå‹•ã‹ãªã„

```bash
# ã‚³ãƒã‚¯ã‚¿ã®çŠ¶æ…‹ç¢ºèª
curl http://localhost:8083/connectors/postgres-connector/status

# ã‚³ãƒã‚¯ã‚¿ã‚’å†ç™»éŒ²
npm run setup:debezium
```

### Elasticsearch ãŒèµ·å‹•ã—ãªã„

ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚Docker Desktop ã®ãƒ¡ãƒ¢ãƒªå‰²ã‚Šå½“ã¦ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚

### Kafka ã«æ¥ç¶šã§ããªã„

Kafka ã®èµ·å‹•å®Œäº†ã‚’å¾…ã¡ã¾ã™ï¼ˆåˆå›ã¯1ã€œ2åˆ†ã‹ã‹ã‚Šã¾ã™ï¼‰ã€‚

```bash
docker-compose logs kafka
```

## ğŸš§ ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

- [ ] PostgreSQL ã®èª­ã¿å–ã‚Šå°‚ç”¨ãƒ¬ãƒ—ãƒªã‚«è¿½åŠ 
- [ ] Kafka Streams ã«ã‚ˆã‚‹é›†è¨ˆå‡¦ç†
- [ ] Grafana + Prometheus ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹å¯è¦–åŒ–
- [ ] è¤‡æ•°ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- [ ] Schema Registry å°å…¥
- [ ] éšœå®³å¾©æ—§ãƒ†ã‚¹ãƒˆï¼ˆã‚«ã‚ªã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼‰

## ğŸ“š å‚è€ƒè³‡æ–™

- [Designing Data-Intensive Applications (DDIA)](https://dataintensive.net/)
- [Debezium Documentation](https://debezium.io/documentation/)
- [Apache Kafka Documentation](https://kafka.apache.org/documentation/)
- [Elasticsearch Guide](https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html)

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT

## ğŸ¤ Flash Sale ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®çµ±åˆ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å­¦ã‚“ã ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€Flash Sale ã‚·ã‚¹ãƒ†ãƒ ã«ä»¥ä¸‹ã®ã‚ˆã†ã«å¿œç”¨ã§ãã¾ã™ï¼š

- Redis ã®åœ¨åº«ç®¡ç† â†’ Kafka ã¸ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
- æ³¨æ–‡å±¥æ­´ã‚’ PostgreSQL ã«æ°¸ç¶šåŒ–
- åœ¨åº«çŠ¶æ³ã‚’ Elasticsearch ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”¨ã®é›†è¨ˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

è©³ç´°ã¯ Flash Sale ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® Phase 5 ä»¥é™ã§å®Ÿè£…äºˆå®šã€‚

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
unbundled-db-playground/
â”œâ”€â”€ docker-compose.yml          # å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®å®šç¾©
â”œâ”€â”€ package.json                # npm scripts
â”œâ”€â”€ tsconfig.json               # TypeScriptè¨­å®š
â”œâ”€â”€ README.md                   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ QUICKSTART.md               # æœ€é€Ÿèµ·å‹•æ‰‹é †
â”œâ”€â”€ ARCHITECTURE.md             # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°
â”œâ”€â”€ init-db/
â”‚   â””â”€â”€ 01-init.sql            # PostgreSQLåˆæœŸåŒ–
â””â”€â”€ src/
    â”œâ”€â”€ types/index.ts         # å‹å®šç¾©
    â”œâ”€â”€ api/server.ts          # Express API
    â”œâ”€â”€ consumers/
    â”‚   â”œâ”€â”€ search-indexer.ts  # Kafkaâ†’Elasticsearch
    â”‚   â””â”€â”€ cache-updater.ts   # Kafkaâ†’Redis
    â”œâ”€â”€ setup/
    â”‚   â”œâ”€â”€ setup-debezium.ts  # Debeziumè¨­å®š
    â”‚   â””â”€â”€ setup-elasticsearch.ts
    â””â”€â”€ scripts/
        â”œâ”€â”€ test-insert.ts     # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æŠ•å…¥
        â””â”€â”€ test-search.ts     # æ¤œç´¢ãƒ†ã‚¹ãƒˆ
```

## ğŸ¯ å­¦ç¿’ã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

0. **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãƒ™ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª**

1. **åŸºç¤ç†è§£**ï¼ˆã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
   - Event-Driven Architecture ã®åŸºæœ¬
   - CDC ã®ä»•çµ„ã¿
   - Polyglot Persistence

2. **å¿œç”¨å®Ÿè£…**ï¼ˆFlash Saleçµ±åˆï¼‰
   - Outbox Pattern ã®å®Ÿè£…
   - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒŠãƒ«æ•´åˆæ€§
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°

3. **æœ¬ç•ªé‹ç”¨**ï¼ˆå°†æ¥ï¼‰
   - ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ
   - ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥
   - éšœå®³å¾©æ—§æ‰‹é †

---

**æ¥½ã—ã„å­¦ç¿’ã‚’ï¼** ğŸ‰
